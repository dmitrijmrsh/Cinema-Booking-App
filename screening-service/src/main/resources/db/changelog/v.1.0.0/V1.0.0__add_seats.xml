<?xml version="1.0" encoding="UTF-8" ?>
<databaseChangeLog
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet id="1" author="dmitrijmrsh">
        <sql>
            INSERT INTO seat (row_number, seat_in_row, status, screening_id)
            SELECT
                row.n AS row_number,
                seat.n AS seat_in_row,
                'AVAILABLE',
                s.id AS screening_id
            FROM
                screening s
                CROSS JOIN
                (SELECT 1 AS n UNION SELECT 2 UNION SELECT 3 UNION SELECT 4 UNION SELECT
                    5 UNION SELECT 6 UNION SELECT 7 UNION SELECT 8 UNION SELECT 9 UNION SELECT 10) row
                CROSS JOIN
                (SELECT 1 AS n UNION SELECT 2 UNION SELECT 3 UNION SELECT 4 UNION SELECT
                    5 UNION SELECT 6 UNION SELECT 7 UNION SELECT 8 UNION SELECT 9 UNION SELECT 10) seat
            ORDER BY s.id, row.n, seat.n
        </sql>
    </changeSet>


</databaseChangeLog>